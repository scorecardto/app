build:
  name: List files
  steps:
    - eas/checkout
    - eas/use_npm_token
    - eas/install_node_modules
    - run: expo prebuild
    - run: rm -rf ios/Scorecard.xcodeproj
    - run: echo y | expo run:ios & disown
    - run: sed -i '' 's/5.4/5.0/g' ios/Scorecard.xcodeproj/project.pbxproj
    - run: sed -i '' "15s/.*/pod 'SwiftSoup'/" ios/Podfile
    - run: cp Info.plist ios/Scorecard/Info.plist
    - eas/resolve_apple_team_id_from_credentials:
        id: resolve_apple_team_id_from_credentials
    - run:
        name: Install pods
        working_directory: ./ios
        command: pod install
    - eas/configure_ios_credentials
    - eas/configure_ios_version
    - eas/generate_gymfile_from_template:
        inputs:
          credentials: ${ eas.job.secrets.buildCredentials }
    - eas/run_fastlane
    - eas/find_and_upload_build_artifacts
